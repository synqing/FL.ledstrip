---
description: Create a research hypothesis for MATRIX innovation with surgical precision
globs:
  - "*.md"
alwaysApply: false
---

# Create MATRIX Research Hypothesis

```
â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— 
â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•    â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—
â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ•”â•     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•”â–ˆâ–ˆâ•—     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â•šâ•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘
â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•—    â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
â•šâ•â•     â•šâ•â•â•šâ•â•  â•šâ•â•   â•šâ•â•   â•šâ•â•  â•šâ•â•â•šâ•â•â•šâ•â•  â•šâ•â•    â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â• 
```

## ğŸ¯ Protocol Overview
This protocol generates **actionable, measurable** research hypotheses for MATRIX (9x9 LED grid) innovations, incorporating battle-tested optimizations from strips evolution while leveraging unique 2D capabilities.

## ğŸ“‹ Hypothesis Document Structure

### Header Metadata
```yaml
---
title: "[Innovation Title]"
status: "ğŸŸ¢ PLANNED | ğŸŸ¡ IN_PROGRESS | âœ… VALIDATED | âŒ FAILED"
priority: "ğŸ”´ CRITICAL | ğŸŸ¡ HIGH | ğŸŸ¢ ENHANCEMENT"
effort: "[X] DAYS"
author: "@your-handle"
reviewers: ["@reviewer1", "@reviewer2"]
tags: ["category", "technique", "impact"]
created: "YYYY-MM-DD"
updated: "YYYY-MM-DD"
---
```

### 1. Executive Summary Box
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     INNOVATION SUMMARY                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Title:     [Concise Innovation Name]                           â”‚
â”‚ Category:  [2D Physics|Transitions|Performance|Visual|Cross]    â”‚
â”‚ Impact:    [Game-changing|High|Medium|Low]                     â”‚
â”‚ Risk:      [ğŸ”´ High|ğŸŸ¡ Medium|ğŸŸ¢ Low]                          â”‚
â”‚ Timeline:  [X days development + Y days validation]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Background & Motivation
```markdown
## ğŸ§¬ Innovation DNA

### Matrix Heritage
- **Source**: `src/main.cpp:XXX-YYY` (effectName)
- **Original Performance**: XX FPS, Y.YKB memory
- **Limitation**: [What held it back]

### Strips Innovation to Harvest
- **Source**: `src/effects/path/File.h:XXX-YYY`
- **Key Learning**: [Specific technique/optimization]
- **Performance Gain**: [Quantified improvement]

### Unique 2D Opportunity
> "What can ONLY be done on a 9x9 grid that 1D strips can't achieve?"
```

### 3. Hypothesis Statement
```markdown
## ğŸ”¬ Scientific Hypothesis

> **IF** we apply [SPECIFIC STRIPS TECHNIQUE] to [MATRIX 2D CAPABILITY]  
> **THEN** we can achieve [MEASURABLE OUTCOME]  
> **RESULTING IN** [QUANTIFIED IMPROVEMENT] over baseline
```

### 4. Success Criteria Dashboard
```markdown
## ğŸ“Š Success Metrics

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           QUANTITATIVE TARGETS                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â¬œ FPS:        â‰¥120 (currently: XX)           â”‚
â”‚ â¬œ CPU Usage:  <15% (currently: XX%)          â”‚
â”‚ â¬œ Memory:     <500B heap (currently: XXXX)   â”‚
â”‚ â¬œ Latency:    <100Î¼s (currently: XXXÎ¼s)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           QUALITATIVE TARGETS                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â¬œ Visual Quality: [Specific criteria]         â”‚
â”‚ â¬œ Code Modularity: [Reusability metric]      â”‚
â”‚ â¬œ Innovation Value: [Unique capability]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5. Technical Implementation Plan
```markdown
## ğŸ› ï¸ Implementation Architecture

### Core Algorithm
\`\`\`cpp
// File: src/effects/matrix/[EffectName].h
class Matrix[EffectName] : public EffectBase {
    // Memory budget: XXX bytes
    static constexpr size_t MAX_SOURCES = 4;
    
    struct OptimizedData {
        uint16_t param16;  // FastLED 16-bit space
        uint8_t grid[9][9]; // 2D advantage
    };
    
    void update() override {
        // Core innovation algorithm
    }
};
\`\`\`

### Integration Points
- **Effect Registry**: Line XXX in `EffectRegistry.h`
- **Encoder Mapping**: Encoders X,Y,Z for parameters
- **Transition Engine**: Compatible with all 6 transition types
```

### 6. Development Timeline
```markdown
## ğŸ“… Surgical Execution Plan

### Day 0: Foundation (4 hours)
- [ ] Code archaeology - analyze heritage code
- [ ] Performance baseline - measure current state
- [ ] Memory profiling - identify optimization targets
- [ ] Risk assessment - validate feasibility

### Day 1-2: Core Development (16 hours)
- [ ] Implement base algorithm
- [ ] Apply FastLED optimizations
- [ ] Create test harness
- [ ] Initial benchmarking

### Day 3: Optimization Sprint (8 hours)
- [ ] Profile hot paths
- [ ] Eliminate heap allocations
- [ ] Apply SIMD where applicable
- [ ] Squeeze out final 10% performance

### Day 4: Integration & Polish (8 hours)
- [ ] Effect system integration
- [ ] Encoder mappings
- [ ] Transition compatibility
- [ ] Documentation

### Day 5: Validation (4 hours)
- [ ] Performance validation
- [ ] Visual quality assessment
- [ ] Cross-pollination documentation
- [ ] Portfolio submission
```

### 7. Risk Mitigation Matrix
```markdown
## ğŸš¨ Risk Analysis & Mitigation

| Risk | Impact | Probability | Detection Method | Mitigation Strategy | Fallback |
|------|--------|-------------|------------------|---------------------|----------|
| [Risk] | ğŸ”´/ğŸŸ¡/ğŸŸ¢ | High/Med/Low | [How detected] | [Primary strategy] | [Plan B] |

### Pre-Flight Checklist
- [ ] ESP32-S3 specific optimizations identified
- [ ] Memory allocation strategy validated
- [ ] Performance profiling tools ready
- [ ] Visual validation criteria defined
```

### 8. Validation Protocol
```markdown
## ğŸ§ª Validation & Testing

### Performance Tests
\`\`\`bash
# Test 1: Baseline Performance
PROFILE=1 pio run -t upload && pio device monitor
# Target: >120 FPS sustained for 60 seconds

# Test 2: Memory Stability
HEAP_TRACE=1 ITERATIONS=1000 pio test -e native
# Target: 0 bytes heap growth

# Test 3: CPU Usage
CORE_DEBUG_LEVEL=5 pio run -t upload
# Target: <15% on Core 1
\`\`\`

### Visual Quality Checklist
- [ ] No flicker or tearing
- [ ] Smooth parameter transitions
- [ ] Edge case handling correct
- [ ] Color accuracy maintained
```

### 9. Cross-Pollination Strategy
```markdown
## ğŸ”„ Knowledge Transfer

### What Matrix Teaches Strips
- [Specific 2D insight that could inspire 1D patterns]
- [Mathematical approach unique to grid layout]
- [Performance technique from spatial awareness]

### Future Evolution Path
1. **Next Innovation**: [What this enables]
2. **Combination Potential**: [How this combines with other effects]
3. **Platform Extension**: [Could this work on larger grids?]
```

### 10. Code Integration Guide
```markdown
## ğŸ”§ Step-by-Step Integration

### Step 1: Add Effect Class
\`\`\`cpp
// src/effects/matrix/[EffectName].h
\`\`\`

### Step 2: Register Effect
\`\`\`cpp
// src/effects/EffectRegistry.cpp:XXX
registry.registerEffect<Matrix[EffectName]>();
\`\`\`

### Step 3: Configure Encoders
\`\`\`cpp
// src/control/EncoderMappings.cpp:XXX
mapEncoder(4, &Matrix[EffectName]::setParam1);
\`\`\`

### Step 4: Update Documentation
- [ ] Add to effects list in README.md
- [ ] Create demo video/GIF
- [ ] Update performance benchmarks
```

## ğŸ“ Quick Template

```markdown
# HYPOTHESIS: [Your Innovation Title]

---
title: "[Title]"
status: "ğŸŸ¢ PLANNED"
priority: "ğŸ”´ CRITICAL"
effort: "5 DAYS"
author: "@your-handle"
created: "2024-01-XX"
---

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     INNOVATION SUMMARY                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Title:     [Name]                                               â”‚
â”‚ Category:  [Type]                                               â”‚
â”‚ Impact:    [Level]                                              â”‚
â”‚ Risk:      [Level]                                              â”‚
â”‚ Timeline:  [Duration]                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[Continue with all sections...]
```

## ğŸš€ Usage Examples

```bash
# Create hypothesis for 2D physics innovation
ai create-hypothesis "2D Wave Interference Engine" --category="2D Physics" --priority="CRITICAL"

# Create performance optimization hypothesis  
ai create-hypothesis "Matrix sin16() Optimization" --category="Performance" --effort="2 DAYS"

# Create cross-pollination hypothesis
ai create-hypothesis "Strip Wave Engine to Matrix Adaptation" --category="Cross-Pollination"
```

---

**Remember**: Every hypothesis must be **actionable**, **measurable**, and leverage the unique advantages of 2D space while incorporating hard-won optimizations from strips evolution!